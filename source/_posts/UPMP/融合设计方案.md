---
categories:
  - UPMP
---
# 融合设计方案

## 1.需求分析

PRD：

## 2.概要设计

### 2.1 模块

#### 权限相关：
1.一试爱上新增菜单
2.一试爱上新增用户角色（试用频道平台运营和试用频道采销）
3.历史用户支持批量导入，并查看
4.采销端需提供角色开通--接口--，前端去识别用户是否有菜单权限？
5.VC侧venderId展示需屏蔽试用频道活动展示
6.shop权限不去考虑变更，无工作量？

#### 外部交互：

对外提供：**复用校园渠道相关，但是不能影响之前的接口功能**
1.状态变更MQ
2.提供活动查询接口
3.

对试用频道调用：
1.申请完成时间Worker发起查询申请用户URL，人数等JSF调用
2.接口筛选名单结束MQ
3.发起中选用户查询JSF  是否合一个？

#### 活动创建 ：
1.关于校验相关
①商品SKU相关
②计划派发量 库存相关
③申请时间  开始结束时间相关
④试用价格
⑤中选要求 （用户申请任务+中选规则）
⑥其他

#### 其他：


两端：一试爱上（要注意兼容采销端，类似VC）+shop端

状态机变更（活动状态，审核状态），广播MQ，操作日志记录
活动创建  商品模块， 库存模块，申领任务模块，中选规则模块， 是否有此内容
活动查询/详情页展示
修改/删除
异常活动处理（抽奖使用，闪电试）
黑名单+shop端改造
促销相关，付费订单相关
BDP建表相关





查询活动信息

{
	"activityDetailImage":"",
	"activitySologon":"",
	"activityType":0,
	"createBy":"",
	"createTime":"2022-01-24 11:24:39",
	"deleted":0,
	"description":"",
	"distributionModel":0,
	"errorMsg":"",
	"id":0,
	"imageUrl":"",
	"name":"",
	"paramGroups":{},// Key:"statistic","promotion"
	"planEndTime":"2022-01-24 11:24:39",
	"planSendCount":0,
	"planStartTime":"2022-01-24 11:24:39",
	"sendChannel":0,
	"sendType":0,
	"source":0,
	"sourceOwner":"",
	"status":0,
	"trialPrice":0,
	"tryCommodityVO":{
		"activityId":0,
		"brandId":0,
		"brandName":"",
		"cid1":0,
		"cid1Name":"",
		"cid2":0,
		"cid2Name":"",
		"cid3":0,
		"cid3Name":"",
		"code":"",
		"createBy":"",
		"createTime":null,
		"deleted":0,
		"id":0,
		"imagePath":"",
		"name":"",
		"price":0,
		"sellerCode":"",
		"sellerName":"",
		"shopId":0,
		"skuType":0,
		"updateBy":"",
		"updateTime":null,
		"venderColType":0,
		"venderId":0,
		"venderName":""
	},
	"tryStrategyVO":[
		{
			"activityId":0,
			"createBy":"",
			"createTime":null,
			"deleted":0,
			"id":0,
			"param":null,
			"paramList":null,
			"strategyCode":0,
			"strategyType":0,
			"updateBy":"",
			"updateTime":null
		},
		{
			"activityId":0,
			"createBy":"",
			"createTime":null,
			"deleted":0,
			"id":0,
			"param":null,
			"paramList":null,
			"strategyCode":0,
			"strategyType":0,
			"updateBy":"",
			"updateTime":null
		}
	],
	"updateBy":"",
	"updateTime":"2022-01-24 11:24:39",
	"warehouseType":0
}