---
categories:
  - UPMP
---
# 品类转化数据架构切ES

背景：

目前运营看板pin表日均数据约10w，但是品类转化数据大数据侧预估每日量级为300-400w左右。目前关系型数据库无法满足此量级。

## 1.表结构相关

原数据表： board_activity   board_activity_pin

**board_activity**

涉及 基本数据



> 

**讨论点**

> 1.mapping表结构怎么创建，是手动创建还是数据决定，若为手动创建 表结构是否需要表更
>
> 2.申请ES相关物料，索引，分片，复制分片

## 2.业务需求

**一二三级品类转化** 主要是查看用户操作之后对目标商品的品类进行的转化。

> 1.计算用户行为 浏览、加购、成交、复购用户数
>
> 2.计算总量 PV，销售额销售量
>
> 3.计算各种转化率，派发-UV、UV-加购、派发-成交、加购成交、成交转化率等
>
> 4.计算成交用户的行为  成交额，成交量，成交用户价值（新老唤醒用户）
>
> 5.计算统计周期内（运营看板）、单日（活动看板）上述指标明细。

## 3.代码结构相关

> 
>
> board_activity（活动相关信息表）
>
>  board_activity_pin（用户转化行为表） 
>
> board_activity_summary(活动级每日汇总表)均为每日数据。

4